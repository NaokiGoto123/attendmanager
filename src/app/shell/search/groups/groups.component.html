<div class="spinner-container" *ngIf="initialLoading">
  <mat-spinner></mat-spinner>
</div>

<ng-container *ngIf="!initialLoading">
  <form
    class="search-field-container"
    (ngSubmit)="search(valueControl.value, searchOptions)"
  >
    <mat-form-field class="search-field" appearance="outline">
      <mat-label>Search from your events</mat-label>

      <input
        matInput
        type="text"
        [formControl]="valueControl"
        autocomplete="off"
        [matAutocomplete]="auto"
      />

      <mat-autocomplete
        autoActiveFirstOption
        (optionSelected)="search(valueControl.value, searchOptions)"
        #auto="matAutocomplete"
      >
        <mat-option *ngFor="let option of options" [value]="option.name">
          {{ option.name }}
        </mat-option>
      </mat-autocomplete>

      <button
        mat-button
        *ngIf="valueControl.value"
        matSuffix
        mat-icon-button
        aria-label="Clear"
        type="button"
        (click)="clearSearch(); search(valueControl.value, searchOptions)"
      >
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </form>
  <mat-progress-bar
    class="progress-bar"
    mode="indeterminate"
    *ngIf="loading"
  ></mat-progress-bar>

  <ng-container>
    <div class="groups-container" *ngIf="items.length">
      <div
        *ngFor="let item of items"
        infiniteScroll
        [infiniteScrollDistance]="1"
        [infiniteScrollThrottle]="50"
        [infiniteScrollContainer]="uiService.scrollWrapperElement"
        (scrolled)="additionalSearch()"
      >
        <app-group [group]="item"></app-group>
      </div>
    </div>

    <div class="no-groups-container" *ngIf="!items?.length">
      <img class="no-groups-image" src="/assets/images/music-festival.svg" />
      <h1>No groups</h1>
      <h1 routerLink="/create-group">Create group</h1>
    </div>
  </ng-container>
</ng-container>
