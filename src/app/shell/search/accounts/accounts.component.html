<form
  class="search-field-container"
  (ngSubmit)="querySearch(valueControl.value, searchOptions)"
>
  <mat-form-field class="search-field" appearance="outline">
    <mat-label>Search users</mat-label>

    <input
      matInput
      type="text"
      [formControl]="valueControl"
      autocomplete="off"
      [matAutocomplete]="auto"
    />

    <mat-autocomplete
      autoActiveFirstOption
      (optionSelected)="querySearch(valueControl.value, searchOptions)"
      #auto="matAutocomplete"
    >
      <mat-option *ngFor="let option of options" [value]="option.displayName">
        {{ option.displayName }}
      </mat-option>
    </mat-autocomplete>

    <button
      mat-button
      *ngIf="valueControl.value"
      matSuffix
      mat-icon-button
      aria-label="Clear"
      type="button"
      (click)="clearSearch(); querySearch(valueControl.value, searchOptions)"
    >
      <mat-icon>close</mat-icon>
    </button>
  </mat-form-field>
</form>

<mat-list
  role="list"
  *ngFor="let item of items"
  infiniteScroll
  [infiniteScrollDistance]="1"
  [infiniteScrollThrottle]="50"
  [infiniteScrollContainer]="uiService.scrollWrapperElement"
  (scrolled)="additionalSearch()"
>
  <mat-list-item
    class="list-item"
    role="listitem"
    routerLink="/account"
    [queryParams]="{ id: item.searchId }"
  >
    <img class="account-picture" src="{{ item.photoURL }}" />
    {{ item.displayName }}
  </mat-list-item>
  <mat-divider></mat-divider>
</mat-list>
<mat-spinner *ngIf="loading" class="spinner"></mat-spinner>
