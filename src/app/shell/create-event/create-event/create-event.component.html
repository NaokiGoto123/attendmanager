<div *ngIf="noGroup">
  <div class="noGroup-container">
    <mat-icon class="noGroup-icon" [inline]="true">group_add</mat-icon>
    <h1>
      You do not belong to any group or you are not an admin of any group.
    </h1>
    <h1>You can <a routerLink="/search">search</a> for groups</h1>
    <h1>or</h1>
    <h1>You can <a routerLink="/create-group">create</a> one</h1>
  </div>
</div>

<div *ngIf="!noGroup">
  <div class="container">
    <form class="create-event-form" [formGroup]="form">
      <div *ngIf="ifTarget">
        <h1>Update event</h1>
      </div>
      <div *ngIf="!ifTarget">
        <h1>Create event</h1>
      </div>

      <div class="group-picker-container" *ngIf="!ifTarget">
        <mat-form-field class="group-picker" appearance="outline">
          <mat-label>Which group</mat-label>
          <mat-select formControlName="groupid" required>
            <mat-option
              *ngFor="let adminGroups of adminGroups"
              [value]="adminGroups.id"
            >
              {{ adminGroups.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <mat-form-field class="create-event-field" appearance="outline">
        <mat-label>What is the event title?</mat-label>
        <input
          matInput
          formControlName="title"
          type="text"
          placeholder="E.g. Picnic"
          required
        />
      </mat-form-field>

      <mat-form-field class="create-event-field" appearance="outline">
        <mat-label>Write event description</mat-label>
        <input
          matInput
          formControlName="description"
          placeholder="E.g. Bring your water bottle."
          type="text"
        />
      </mat-form-field>

      <p>Is there a limit for number of members?</p>
      <mat-radio-group
        aria-label="Select an option"
        [(ngModel)]="ifMemberLimit"
        [ngModelOptions]="{ standalone: true }"
      >
        <mat-radio-button [value]="true">Yes</mat-radio-button>
        <mat-radio-button [value]="false">No</mat-radio-button>
      </mat-radio-group>

      <mat-form-field
        *ngIf="ifMemberLimit"
        class="create-event-field"
        appearance="outline"
      >
        <mat-label>What is the limit?</mat-label>
        <input
          matInput
          formControlName="memberlimit"
          placeholder="E.g. 0"
          type="number"
        />
      </mat-form-field>

      <mat-form-field class="create-event-field" appearance="outline">
        <mat-label>Choose a date</mat-label>
        <input
          matInput
          formControlName="date"
          [matDatepicker]="picker"
          required
          readonly
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker touchUi #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field class="create-event-field" appearance="outline">
        <mat-label>What time is it happening?</mat-label>
        <input
          matInput
          aria-label="default time"
          [ngxTimepicker]="defaultValue"
          formControlName="time"
          readonly
          required
        />
        <ngx-material-timepicker #defaultValue></ngx-material-timepicker>
      </mat-form-field>

      <mat-form-field class="create-event-field" appearance="outline">
        <mat-label>Where is it happening?</mat-label>
        <input
          matInput
          formControlName="location"
          type="text"
          placeholder="E.g. house"
          required
        />
      </mat-form-field>

      <p>{{ form.value.price }} {{ form.value.currency }}</p>

      <mat-form-field>
        <mat-label>Choose currency</mat-label>
        <mat-select formControlName="currency">
          <div *ngFor="let currency of currencies">
            <mat-option [value]="currency">{{ currency }}</mat-option>
          </div>
        </mat-select>
      </mat-form-field>

      <div class="create-event-field">
        <mat-slider
          thumbLabel
          [displayWith]="formatLabel"
          tickInterval="500"
          step="500"
          formControlName="price"
          min="0"
          max="30000"
        >
        </mat-slider>
      </div>

      <mat-slide-toggle class="create-event-field" formControlName="private">
        <div *ngIf="form.value.private">
          Private
        </div>
        <div *ngIf="!form.value.private">
          Public
        </div>
      </mat-slide-toggle>

      <mat-slide-toggle class="create-event-field" formControlName="searchable">
        <div *ngIf="form.value.searchable">
          Searchable
        </div>
        <div *ngIf="!form.value.searchable">
          Unsearchable
        </div>
      </mat-slide-toggle>

      <div class="buttons" *ngIf="ifTarget">
        <button
          mat-raised-button
          class="update-button"
          [disabled]="form.invalid"
          color="primary"
          (click)="update()"
        >
          Update
        </button>
        <p class="ortext">or</p>
        <button mat-raised-button color="warn" (click)="delete()">
          Delete
        </button>
      </div>

      <div *ngIf="!ifTarget">
        <button
          mat-raised-button
          class="create-button"
          [disabled]="form.invalid || form.pristine"
          color="primary"
          (click)="submit()"
        >
          Create
        </button>
      </div>
    </form>
  </div>
</div>
